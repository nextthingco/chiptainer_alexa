--- /home/andrew/Github/AlexaPi/main.py	2017-02-14 13:01:33.083942183 -0800
+++ /home/andrew/Github/AlexaPi2/main.py	2017-02-14 17:06:32.158156287 -0800
@@ -3,20 +3,20 @@
 import os
 import random
 import time
-import RPi.GPIO as GPIO
+import CHIP_IO.GPIO as GPIO
 import alsaaudio
 import wave
 import random
-from creds import *
 import requests
 import json
 import re
+from creds import *
 from memcache import Client
 
 #Settings
-button = 18 #GPIO Pin with button connected
-lights = [24, 25] # GPIO Pins with LED's conneted
-device = "plughw:1" # Name of your microphone/soundcard in arecord -L
+button = "CSID0" #GPIO Pin with button connected
+lights = ["CSID1", "CSID2"] # GPIO Pins with LED's conneted
+device = "default" # Name of your microphone/soundcard in arecord -L
 
 #Setup
 recorded = False
@@ -24,8 +24,6 @@
 mc = Client(servers, debug=1)
 path = os.path.realpath(__file__).rstrip(os.path.basename(__file__))
 
-
-
 def internet_on():
     print "Checking Internet Connection"
     try:
@@ -112,7 +110,10 @@
 	last = GPIO.input(button)
 	while True:
 		val = GPIO.input(button)
-		GPIO.wait_for_edge(button, GPIO.FALLING) # we wait for the button to be pressed
+		while(GPIO.input(button)==1): # wait until button is pushed
+			time.sleep(0.01)
+
+		print( "RECORDING...")
 		GPIO.output(lights[1], GPIO.HIGH)
 		inp = alsaaudio.PCM(alsaaudio.PCM_CAPTURE, alsaaudio.PCM_NORMAL, device)
 		inp.setchannels(1)
@@ -137,8 +138,11 @@
 	GPIO.cleanup()
 	GPIO.setmode(GPIO.BCM)
 	GPIO.setup(button, GPIO.IN, pull_up_down=GPIO.PUD_UP)
-	GPIO.setup(lights, GPIO.OUT)
-	GPIO.output(lights, GPIO.LOW)
+	GPIO.setup(lights[0], GPIO.OUT)
+	GPIO.setup(lights[1], GPIO.OUT)
+	GPIO.output(lights[0], GPIO.LOW)
+	GPIO.output(lights[1], GPIO.LOW)
+
 	while internet_on() == False:
 		print "."
 	token = gettoken()
